<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>角色列表</title>
<link href="/supervision/source/css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/supervision/source/js/jquery-1.8.2.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  	$(".sure").click(function(){
	  	$("#confirm_tip").fadeOut(100);
	});  
	$('.tablelist tbody tr:odd').addClass('odd');
	getDataList(1);
});
function getDataList(pageNo){
	var obj = {};
	obj.pageNo = pageNo; 
	$.ajax({ 
       type: "POST", //请求类型
       url: "/supervision/system/resource/resourceList.do",
       data:obj,//发送到服务器的数据，序列化后的值 
       dataType:"json", //响应数据类型      
       success: function(req) {
       		$("#tb_roleList").html("");
       		var resourceHtml = "<tr><td colspan=\"6\">没有获取到相关数据</td></tr>";
	       if(req.datalist != null && req.datalist.length >0){
	       		resourceHtml = "";
	       		for(var i = 0;i<req.datalist.length;i++){
	       			resourceHtml +="<tr>";
				    resourceHtml +="<td><input name=\"userChk\" type=\"checkbox\" value=\""+req.datalist[i].id+"\" /></td>";
				    resourceHtml +="<td>"+req.datalist[i].name+"</td>";
				    resourceHtml +="<td>"+req.datalist[i].resource+"</td>";
				    resourceHtml +="<td>"+req.datalist[i].functionName+"</td>";
			        resourceHtml +="</tr>";
	       		}
	       }
	       if(req.data != null){
	       		$("#i_totalcount").text(req.data.totalCount);
	       		$("#i_pageNo").text(req.data.pageNo);
	       		var count = Math.ceil(req.data.totalCount/10);
	       		$("#ul_pageList").html("");
	       		var ulHtml = "";
	       		if(count == 1){
	       			ulHtml += "<li class=\"paginItem\"><a href=\"javascript:;\"><span class=\"pagepre\"></span></a></li>";
	       		}else{
	       			ulHtml += "<li class=\"paginItem\"><a href=\"javascript:;\"><span class=\"pagepre\"></span></a></li>";
	       		}
	       		for(var i = 1;i<=count;i++){
	       			if(count == 1){
	       				ulHtml += "<li class=\"paginItem current\"><a href=\"javascript:;\">1</a></li>";
	       			}else{
	       				if(i == req.data.pageNo){
	       					ulHtml += "<li class=\"paginItem current\"><a href=\"javascript:;\">"+i+"</a></li>";
	       				}else{
	       					ulHtml += "<li class=\"paginItem\"><a href=\"javascript:;\">"+i+"</a></li>";
	       				}
	       			}
	       		}
	       		if(count == 1){
	       			ulHtml += "<li class=\"paginItem\"><a href=\"javascript:;\"><span class=\"pagenxt\"></span></a></li>";
	       		}else{
	       			ulHtml += "<li class=\"paginItem\"><a href=\"javascript:;\"><span class=\"pagenxt\"></span></a></li>";
	       		}
	       		
	       		$("#ul_pageList").html(ulHtml);
	       }
	       $("#tb_roleList").html(resourceHtml);
	      
       }
	});
}
function showAlertTip(type){
	if(type == 'edit'){
		$("#showmessage").html("请选择要编辑的角色！");
		$("#confirm_tip").fadeIn(200);
	}else{
		$("#showmessage").html("请选择要删除的角色！");
		$("#confirm_tip").fadeIn(200);
	}
}
function showAddTip(){
	$("#add_tip").fadeIn(200);
}
function saveOrUpdateUserInfo(){
	clearForm();
	$('#add_tip').fadeOut(100);
}
function clearForm(){

}
</script>


</head>


<body>

	<div class="place">
    <span>位置：</span>
    <ul class="placeul"> 
    <li><a href="#">基础数据管理</a></li>
    <li><a href="#">资源管理</a></li>
    </ul>
    </div>
    
    <div class="rightinfo">
    
    <div class="tools">
    
    	<ul class="toolbar">
        <li class="click" onclick="showAddTip();"><span><img src="/supervision/source/images/t01.png" /></span>添加</li>
        <li class="click" onclick="showAlertTip('edit');"><span><img src="/supervision/source/images/t02.png" /></span>修改</li>
        <li onclick="showAlertTip('delete');"><span><img src="/supervision/source/images/t03.png" /></span>删除</li> 
        </ul> 
    
    </div>
    
    
    <table class="tablelist">
    	<thead>
    		<tr>
		        <th></th>
		        <th>资源名称</th>
				<th>资源地址</th>
				<th>所属模块</th>						  
        	</tr>
        </thead>
        <tbody id="tb_roleList">  
        </tbody>
    </table>
    
   
    <div class="pagin">
    	<div class="message">共<i id="i_totalcount" class="blue"></i>条记录，当前显示第&nbsp;<i id="i_pageNo" class="blue">&nbsp;</i>页</div>
        <ul class="paginList" id="ul_pageList">
        
        <li class="paginItem"><a href="javascript:;">1</a></li>
        <li class="paginItem current"><a href="javascript:;">2</a></li>
        <li class="paginItem"><a href="javascript:;">3</a></li>
        <li class="paginItem"><a href="javascript:;">4</a></li>
        <li class="paginItem"><a href="javascript:;">5</a></li>
        <li class="paginItem more"><a href="javascript:;">...</a></li>
        <li class="paginItem"><a href="javascript:;">10</a></li>
        <li class="paginItem"><a href="javascript:;"><span class="pagenxt"></span></a></li>
        </ul>
    </div>
    
    
    <div class="tip" id="confirm_tip">
   		<div class="tiptop"><span>操作提示</span><a  onclick="javascript:$('#confirm_tip').fadeOut(100);" ></a></div>
        
	    <div class="tipinfo">
	        <span><img src="/supervision/source/images/ticon.png" /></span>
	        <div class="tipright">
	        	<p id="showmessage"></p> 
	        </div> 
      	</div>
        
        <div class="tipbtn">
        	<input type="button"  class="sure" value="确定" /> 
        </div> 
    </div> 
     <div class="addtip" id="add_tip">
   		<div class="tiptop"><span>操作提示</span><a  onclick="javascript:clearForm();$('#add_tip').fadeOut(100);" ></a></div>
        
	    <div class="addtipinfo"> 
	       <div style="height:300px;width:99%;">	
	        	<form>
	        		<table cellpadding="0" cellspacing="0" style="width:100%;height:100%;"> 
	        			<tr><td style="height:30px;width:80px;"><span>用户名称：</span></td><td><input type="text" class="dfinput"  /></td></tr> 
	        			<tr><td style="height:30px;"><span>用户账号：</span></td><td><input type="text" class="dfinput"  /></td></tr> 
	        			<tr><td style="height:30px;"><span>用户密码：</span></td><td><input type="text" class="dfinput"  /></td></tr> 
	        			<tr><td style="height:30px;"><span>确认密码：</span></td><td><input type="text" class="dfinput"  /></td></tr>  
	        			<tr><td style="height:30px;"><span>所属机构：</span></td><td><input type="text" class="dfinput"  /></td></tr>
	        			<tr><td style="height:30px;"><span>职务名称：</span></td><td><input type="text" class="dfinput"  /></td></tr>
	        			<tr><td style="height:30px;"><span>用户角色：</span></td><td></td></tr>
	        			<tr><td colspan="2"></td></tr>
	        		</table>
	        	</form>
	       </div>
      	</div>
        
        <div class="tipbtn">
        	<input type="button"  class="saveBtn" value="保存" onclick="saveOrUpdateUserInfo();" /> 
        	<input type="button"  class="cancel" value="取消" onclick="javascript:clearForm();$('#add_tip').fadeOut(100);" /> 
        </div> 
    </div> 
    </div> 

</body>

</html>
